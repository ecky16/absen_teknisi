<!DOCTYPE html>
<html>
  <head>
    <title>QR Absensi Teknisi</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body { font-family: sans-serif; text-align: center; padding: 20px; }
      #qrcode canvas { width: 300px !important; height: 300px !important; }
      #jam { font-size: 24px; margin-top: 20px; }
    </style>
  </head>
  <body>
    <h2>Scan untuk Absen</h2>
    <div id="qrcode"></div>
    <div id="jam"></div>

    <script>
      const botStartLink = "tg://resolve?domain=absensi_qr_bot&start=webapp_absen";
      const qrDiv = document.getElementById("qrcode");

      function generateQR() {
        qrDiv.innerHTML = "";
        QRCode.toCanvas(document.createElement("canvas"), botStartLink, function (err, canvas) {
          if (!err) qrDiv.appendChild(canvas);
        });
      }

      function updateTime() {
        const now = new Date();
        document.getElementById("jam").innerText =
          now.toLocaleDateString("id-ID") + " " + now.toLocaleTimeString("id-ID");
      }

      generateQR();
      updateTime();
      setInterval(updateTime, 1000); // jam real-time
    </script>
  </body>
</html>

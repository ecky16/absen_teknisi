<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login QR Absen</title>
  <style>
:root{
  --bg:#0d0f10;        /* hitam */
  --card:#151518;      /* abu gelap */
  --line:#2a2a2e;      /* garis */
  --text:#f2f2f3;      /* teks */
  --muted:#a1a1aa;     /* teks redup */
  --red:#b40000;       /* merah utama */
}

*,
*::before,
*::after { box-sizing: border-box; }

html,body{
  height:100%;
}

body{
  margin:0;
  font-family: system-ui,-apple-system,'Segoe UI',Roboto,Arial,sans-serif;
  color:var(--text);
  background: radial-gradient(1200px 600px at 50% -10%, rgba(255,0,0,.06), transparent 60%),
              var(--bg);
  display:flex; align-items:center; justify-content:center;
  padding:16px;
}

/* top bar aksen merah */
.bar-merah{
  position: fixed; inset:0 0 auto 0; height:6px;
  background: linear-gradient(90deg, #ff4d4d, var(--red), #ff4d4d);
  opacity:.8;
}

/* kartu login */
.card{
  width:100%; max-width: 440px;
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 22px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}

h1{ margin:0 0 10px; font-size:22px; }
p{ margin:0 0 14px; color:var(--muted); }

/* form */
form{ display:flex; flex-direction:column; gap:12px; }

input#pass{
  width:100%; height: 48px;
  padding: 0 14px;
  background:#0f1012;
  border:1px solid var(--line);
  border-radius:12px;
  color:var(--text);
  font-size:16px;
  outline:none;
}
input#pass::placeholder{ color:#7a7a82; }
input#pass:focus{
  border-color: var(--red);
  box-shadow: 0 0 0 3px rgba(180,0,0,.25);
}

/

  </style>
</head>
<body>
<div class="bar-merah"></div>

  <div class="card">
    <h1>Login QR Absen</h1>
    <p>Masukkan password cluster:</p>
    <form onsubmit="login();return false">
      <input id="pass" type="password" placeholder="Masukkan Password" autofocus />
      <button type="submit">Masuk</button>
      <div id="err" class="err">Password salah. Coba lagi.</div>
    </form>
    <div class="tips">Setelah login, buka halaman area langsung.</div>
  </div>
<script>
  // === SETEL PATH DASAR (kalau file di subfolder GitHub Pages, isi aja) ===
  // contoh: const BASE_PATH = "/absen_teknisi/";
  const BASE_PATH = ""; // biarkan "" jika semua file sejajar dengan login.html

  // mapping: password -> nama file tujuan default
  const DEFAULT_AFTER = {
    "7qvt6": "psn.html",     // cluster PASURUAN
    "xvk98": "jember.html"   // cluster JEMBER
  };

  const CLUSTERS = { "7qvt6":"PASURUAN", "xvk98":"JEMBER" };

  // support query ?next=xxx.html untuk paksa tujuan tertentu
  const url = new URL(window.location.href);
  const next = url.searchParams.get("next");

  function go(dest) {
    // pakai assign agar bisa back; kalau mau tidak bisa back, pakai replace
    window.location.assign(BASE_PATH + dest);
  }

  function login(){
    const v = document.getElementById('pass').value.trim();
    const err = document.getElementById('err');
    if (CLUSTERS[v]) {
      sessionStorage.setItem('loginQR','true');
      sessionStorage.setItem('clusterKey', v);
      err.style.display = 'none';

      const dest = next ? next : DEFAULT_AFTER[v];
      go(dest);
    } else {
      err.style.display = 'block';
    }
  }

  // enter key tetap jalan walau bukan klik tombol
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.querySelector('form');
    form.addEventListener('submit', (e) => { e.preventDefault(); login(); });

    // kalau sudah login & buka login.html lagi â†’ auto direct ke default cluster-nya
    const key = sessionStorage.getItem('clusterKey');
    if (CLUSTERS[key]) {
      const dest = next ? next : DEFAULT_AFTER[key];
      go(dest);
    }
  });
</script>


</body>
</html>
